@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ─── Base Light Theme ─────────────────────────────────────────────────── */
    /* These are the DEFAULTS. The AppearanceContext will override              */
    /* --primary, --accent, --secondary, --border, --ring, --surface            */
    /* dynamically via JS on page load.                                         */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;
    --primary: 217 85% 34%;
    /* Default: Ocean Blue */
    --primary-foreground: 0 0% 100%;
    --secondary: 206 91% 94%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --accent: 224 100% 58%;
    --accent-foreground: 0 0% 100%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;
    --border: 206 89% 86%;
    --ring: 207 90% 54%;
    --surface: 206 91% 98%;
  }

  .dark {
    /* ─── Base Dark Theme ──────────────────────────────────────────────────── */
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;
    --primary: 217 91% 60%;
    --primary-foreground: 220 10% 8%;   /* Dark label on vivid primary buttons */
    --secondary: 217 40% 14%;
    --secondary-foreground: 210 40% 98%;
    --accent: 199 89% 55%;
    --accent-foreground: 220 10% 8%;    /* Dark label on vivid accent buttons */
    --muted: 222 47% 14%;
    --muted-foreground: 215 20% 65%;
    --card: 222 47% 8%;
    --card-foreground: 210 40% 98%;
    --border: 217 47% 14%;
    --ring: 217 91% 60%;
    --surface: 217 47% 9%;
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Noto Sans', 'Noto Sans Thai', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-smoothing: antialiased;
    overscroll-behavior-y: contain;
  }

  /* Safe area padding for notched devices */
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .safe-top {
    padding-top: env(safe-area-inset-top, 0px);
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-surface;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-primary/20 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-primary/40;
  }

  /* Hide scrollbar on mobile for cleaner look */
  @media (max-width: 768px) {
    ::-webkit-scrollbar {
      width: 0px;
      height: 0px;
    }
  }

  /* Hide scrollbar for all textareas */
  textarea::-webkit-scrollbar {
    display: none;
  }

  textarea {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }
}

@layer components {

  /* ============================
     MOBILE-FIRST BUTTON STYLES
     ============================ */
  .btn-minimal {
    @apply inline-flex items-center justify-center rounded-xl text-[11px] font-black uppercase tracking-widest transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-border bg-background hover:bg-primary/5 hover:border-primary/30 hover:text-primary active:scale-95;
    /* Mobile-first: larger touch targets */
    min-height: 44px;
    padding: 0 16px;
  }

  @media (min-width: 768px) {
    .btn-minimal {
      min-height: 40px;
      padding: 0 20px;
    }
  }

  .btn-primary-minimal {
    @apply inline-flex items-center justify-center rounded-xl text-[11px] font-black uppercase tracking-widest transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 active:scale-95 relative overflow-hidden border-none;
    min-height: 44px;
    padding: 0 20px;
  }

  @media (min-width: 768px) {
    .btn-primary-minimal {
      min-height: 40px;
      padding: 0 24px;
    }

    .btn-primary-minimal:hover {
      transform: translateY(-2px);
    }
  }

  .btn-accent-minimal {
    @apply inline-flex items-center justify-center rounded-xl text-[11px] font-black uppercase tracking-widest transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-accent text-accent-foreground border border-accent hover:bg-accent/90 active:scale-95 relative overflow-hidden;
    min-height: 44px;
    padding: 0 20px;
  }

  @media (min-width: 768px) {
    .btn-accent-minimal {
      min-height: 40px;
      padding: 0 24px;
    }

    .btn-accent-minimal:hover {
      transform: translateY(-2px);
    }
  }

  /* Ghost Button (primary color ghost) */
  .btn-ghost-primary {
    @apply inline-flex items-center justify-center rounded-xl text-[11px] font-black uppercase tracking-widest transition-all duration-300 bg-primary/10 text-primary border border-primary/20 hover:bg-primary hover:text-primary-foreground active:scale-95;
    min-height: 44px;
    padding: 0 16px;
  }

  /* Kept for backward compat */
  .btn-orange-ghost {
    @apply btn-ghost-primary;
  }

  /* ============================
     CARD STYLES
     ============================ */
  .card-minimal {
    @apply rounded-2xl border border-border bg-card text-card-foreground transition-all duration-200;
    padding: 16px;
  }

  @media (min-width: 768px) {
    .card-minimal {
      padding: 24px;
    }

    .card-minimal:hover {
      border-color: hsl(var(--primary) / 0.4);
    }
  }

  .card-glass {
    @apply rounded-2xl border border-border bg-surface text-card-foreground;
    padding: 20px;
  }

  @media (min-width: 768px) {
    .card-glass {
      padding: 32px;
    }
  }

  /* ============================
     INPUT STYLES - Touch friendly
     ============================ */
  .input-minimal {
    @apply flex w-full rounded-xl border border-border bg-background px-4 text-sm font-medium transition-all duration-200 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50;
    /* Mobile: 48px height for better touch */
    min-height: 48px;
    padding-top: 12px;
    padding-bottom: 12px;
    font-size: 16px;
    /* Prevent iOS zoom on focus */
  }

  @media (min-width: 768px) {
    .input-minimal {
      min-height: 44px;
      padding-top: 12px;
      padding-bottom: 12px;
      font-size: 14px;
    }
  }

  /* ============================
     STATUS BADGES
     ============================ */
  .badge-success {
    @apply px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-green-500/10 text-green-500 border border-green-500/20;
  }

  .badge-error {
    @apply px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-red-500/10 text-red-500 border border-red-500/20;
  }

  .badge-warning {
    @apply px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-orange-500/10 text-orange-500 border border-orange-500/20;
  }

  .badge-indigo {
    @apply px-2.5 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest bg-indigo-500/10 text-indigo-500 border border-indigo-500/20;
  }

  /* ============================
     GRADIENT TEXT
     ============================ */
  .text-gradient {
    @apply text-primary font-black;
  }

  /* ============================
     LOADING STATE
     ============================ */
  .loading {
    @apply flex items-center justify-center min-h-screen text-lg font-bold tracking-tight text-primary;
  }

  /* ============================
     NAVBAR - Mobile Optimized
     ============================ */
  .navbar-blur {
    @apply bg-background border-b border-border sticky top-0 z-50;
  }

  /* ============================
     BOTTOM NAV (Mobile)
     ============================ */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 bg-background border-t border-border z-50 safe-bottom;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 8px 0;
    padding-bottom: calc(8px + env(safe-area-inset-bottom, 0px));
  }

  @media (min-width: 768px) {
    .bottom-nav {
      display: none;
    }
  }

  .bottom-nav-item {
    @apply flex flex-col items-center gap-1 text-muted-foreground transition-colors;
    padding: 4px 12px;
    min-width: 60px;
  }

  .bottom-nav-item.active {
    @apply text-primary;
  }

  .bottom-nav-item span {
    @apply text-[9px] font-bold uppercase tracking-wider;
  }

  /* ============================
     MOBILE OVERLAY MENU
     ============================ */
  .mobile-menu-overlay {
    @apply fixed inset-0 bg-background/95 backdrop-blur-md z-[90] flex flex-col;
    padding: 80px 24px 24px;
  }

  .mobile-menu-item {
    @apply flex items-center gap-4 px-4 py-4 rounded-2xl text-base font-bold transition-all active:scale-95;
  }

  .mobile-menu-item:hover,
  .mobile-menu-item.active {
    @apply bg-primary/10 text-primary;
  }

  /* ============================
     ICON CONTAINER
     ============================ */
  .icon-container {
    @apply w-10 h-10 rounded-xl bg-surface flex items-center justify-center text-primary border border-border transition-all duration-300;
  }

  @media (min-width: 768px) {
    .icon-container {
      @apply group-hover:bg-primary group-hover:text-white;
    }
  }

  /* ============================
     SWIPE INDICATOR
     ============================ */
  .swipe-indicator {
    @apply w-10 h-1 rounded-full bg-muted-foreground/20 mx-auto mt-2;
  }

  /* ============================
     PULL TO REFRESH INDICATOR
     ============================ */
  .pull-indicator {
    @apply flex items-center justify-center text-primary text-sm font-bold py-4;
  }

  /* ============================
     FLOATING ACTION BUTTON (FAB)
     ============================ */
  .fab {
    @apply fixed z-40 bg-primary text-white rounded-full shadow-lg shadow-primary/30 flex items-center justify-center active:scale-90 transition-all duration-200;
    width: 56px;
    height: 56px;
    bottom: 80px;
    right: 20px;
  }

  @media (min-width: 768px) {
    .fab {
      bottom: 32px;
      right: 32px;
      width: 48px;
      height: 48px;
    }
  }

  /* ============================
     HORIZONTAL SCROLL CONTAINER (for mobile tabs)
     ============================ */
  .horizontal-scroll {
    @apply flex overflow-x-auto gap-2 pb-2;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .horizontal-scroll::-webkit-scrollbar {
    display: none;
  }

  .horizontal-scroll-item {
    @apply flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold transition-all whitespace-nowrap active:scale-95;
  }

  /* ============================
     RESPONSIVE SECTION SPACING
     ============================ */
  .page-container {
    @apply mx-auto;
    padding: 16px;
    max-width: 100%;
    overflow-x: hidden;
  }

  @media (min-width: 768px) {
    .page-container {
      padding: 24px;
      max-width: 1280px;
    }
  }

  @media (min-width: 1024px) {
    .page-container {
      padding: 40px;
    }
  }

  /* ============================
     RESPONSIVE HEADER (page title)
     ============================ */
  .page-title {
    @apply font-black tracking-tight leading-tight;
    font-size: 1.5rem;
  }

  @media (min-width: 768px) {
    .page-title {
      font-size: 1.875rem;
    }
  }

  /* ============================
     TOUCH FRIENDLY SELECT
     ============================ */
  select.input-minimal {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 12px center;
    background-repeat: no-repeat;
    background-size: 20px;
    padding-right: 40px;
  }

  /* ============================
     APPEARANCE PRESET CARD
     ============================ */
  .preset-card {
    @apply relative rounded-2xl border-2 border-border bg-card p-4 cursor-pointer transition-all duration-200 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-0.5;
  }

  .preset-card.active {
    @apply border-primary bg-primary/5 shadow-lg shadow-primary/20;
  }

  .preset-swatch {
    @apply w-8 h-8 rounded-full shadow-md flex-shrink-0;
  }
}

@layer utilities {

  /* Smooth Transitions */
  .transition-smooth {
    @apply transition-all duration-300 ease-in-out;
  }

  /* No-scroll lock (for modals) */
  .no-scroll {
    overflow: hidden;
    position: fixed;
    width: 100%;
  }

  /* Skeleton loading on mobile */
  .skeleton-pulse {
    background: linear-gradient(90deg,
        hsl(var(--surface)) 25%,
        hsl(var(--muted)) 50%,
        hsl(var(--surface)) 75%);
    background-size: 200% 100%;
    animation: skeleton-loading 1.5s ease-in-out infinite;
  }

  @keyframes skeleton-loading {
    0% {
      background-position: 200% 0;
    }

    100% {
      background-position: -200% 0;
    }
  }

  /* Truncate multiline */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Mobile specific padding for bottom nav clearance */
  .pb-safe {
    padding-bottom: calc(72px + env(safe-area-inset-bottom, 0px));
  }

  @media (min-width: 768px) {
    .pb-safe {
      padding-bottom: 0;
    }
  }
}

@keyframes pulse-slow {

  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }

  50% {
    opacity: 0.9;
    transform: scale(0.98);
  }
}

.animate-pulse-slow {
  animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}